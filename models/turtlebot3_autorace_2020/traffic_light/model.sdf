<?xml version='1.0'?>
<sdf version="1.9">
  <model name="traffic_light">
    <static>0</static>

    <joint name="world_fixed" type="fixed">
      <parent>world</parent>
      <child>light_base</child>
    </joint>

    <link name="light_base">
      <pose>0 0 0.125 0 0 0</pose> 
      <visual name="base_black">
        <geometry><box><size>0.12 0.025 0.25</size></box></geometry>
        <material>
          <ambient>0 0 0 1</ambient>
          <diffuse>0 0 0 1</diffuse>
          <specular>0.1 0.1 0.1 1</specular>
        </material>
      </visual>
    </link>

    <link name="red_slide">
      <pose>0 -0.015 0.125 0 0 0</pose>
      <inertial><mass>0.01</mass><inertia><ixx>1e-5</ixx><iyy>1e-5</iyy><izz>1e-5</izz></inertia></inertial>
      <visual name="red_v">
        <geometry><box><size>0.119 0.001 0.249</size></box></geometry>
        <material>
          <ambient>1 1 1 1</ambient><diffuse>1 1 1 1</diffuse>
          <pbr><metal><albedo_map>model://turtlebot3_autorace_2020/traffic_light/materials/textures/traffic_light_red.png</albedo_map></metal></pbr>
        </material>
      </visual>
    </link>

    <link name="yellow_slide">
      <pose>0 0 0.125 0 0 0</pose>
      <inertial><mass>0.01</mass><inertia><ixx>1e-5</ixx><iyy>1e-5</iyy><izz>1e-5</izz></inertia></inertial>
      <visual name="yel_v">
        <geometry><box><size>0.119 0.001 0.249</size></box></geometry>
        <material>
          <ambient>1 1 1 1</ambient><diffuse>1 1 1 1</diffuse>
          <pbr><metal><albedo_map>model://turtlebot3_autorace_2020/traffic_light/materials/textures/traffic_light_yellow.png</albedo_map></metal></pbr>
        </material>
      </visual>
    </link>

    <link name="green_slide">
      <pose>0 0 0.125 0 0 0</pose>
      <inertial><mass>0.01</mass><inertia><ixx>1e-5</ixx><iyy>1e-5</iyy><izz>1e-5</izz></inertia></inertial>
      <visual name="grn_v">
        <geometry><box><size>0.119 0.001 0.249</size></box></geometry>
        <material>
          <ambient>1 1 1 1</ambient><diffuse>1 1 1 1</diffuse>
          <pbr><metal><albedo_map>model://turtlebot3_autorace_2020/traffic_light/materials/textures/traffic_light_green.png</albedo_map></metal></pbr>
        </material>
      </visual>
    </link>

    <joint name="red_joint" type="prismatic"><parent>light_base</parent><child>red_slide</child><axis><xyz>0 1 0</xyz><limit><lower>0</lower><upper>0.015</upper></limit></axis></joint>
    <joint name="yellow_joint" type="prismatic"><parent>light_base</parent><child>yellow_slide</child><axis><xyz>0 1 0</xyz><limit><lower>-0.016</lower><upper>0</upper></limit></axis></joint>
    <joint name="green_joint" type="prismatic"><parent>light_base</parent><child>green_slide</child><axis><xyz>0 1 0</xyz><limit><lower>-0.017</lower><upper>0</upper></limit></axis></joint>

    <plugin filename="gz-sim-joint-position-controller-system" name="gz::sim::systems::JointPositionController"><joint_name>red_joint</joint_name><p_gain>20</p_gain><d_gain>0.5</d_gain></plugin>
    <plugin filename="gz-sim-joint-position-controller-system" name="gz::sim::systems::JointPositionController"><joint_name>yellow_joint</joint_name><p_gain>20</p_gain><d_gain>0.5</d_gain></plugin>
    <plugin filename="gz-sim-joint-position-controller-system" name="gz::sim::systems::JointPositionController"><joint_name>green_joint</joint_name><p_gain>20</p_gain><d_gain>0.5</d_gain></plugin>
  </model>
</sdf>